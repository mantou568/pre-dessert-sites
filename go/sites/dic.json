{
  "id": "dic",
  "name": "海豚",
  "domain": "https://dicmusic.com",
  "public": false,
  "reuse_schema": "NexusPHP",
  "required": {
    "cookie": true,
    "sign_in": true
  },
  "requests": {
    "search": {
      "parser": "CssSelector",
      "method": "GET",
      "path": "/torrents.php?page={page}",
      "params": {
        "keyword": [
          "{keyword}"
        ],
        "searchsubmit": [
          "1"
        ],
        "action": [
          "basic"
        ]
      },
      "list": {
        "selector": "#torrent_table .TableTorrent-rowTitle"
      },
      "fields": {
        "id": {
          "selector": "a[href*='torrents.php?id=']",
          "attribute": "href",
          "filters": [
            { "name": "re_search", "args": [ "id=(\\d+)", 1 ] }
          ]
        },
        "title": {
          "selector": "a[href*='torrents.php?id=']",
          "attribute": "data-tooltip"
        },
        "details": {
          "selector": "a[href*='torrents.php?id=']",
          "attribute": "href"
        },
        "download": {
          "selector": "a[href*='torrents.php?action=download']:first",
          "attribute": "href"
        },
        "size": {
          "selector": ".TableTorrent-cellStatSize",
          "filters": [
            { "name": "byte_size" }
          ]
        },
        "grabs": {
          "selector": ".TableTorrent-cellStatSnatches"
        },
        "seeders": {
          "selector": ".TableTorrent-cellStatSeeders"
        },
        "leechers": {
          "selector": ".TableTorrent-cellStatLeechers"
        },
        "date_added": {
          "selector": ".TableTorrent-cellStatTime span[data-tooltip]",
          "attribute": "data-tooltip",
          "filters": [
            { "name": "timestamp" }
          ]
        },
        "downloadvolumefactor": {
          "selector": ".TorrentTitle-item.tl_free",
          "filters": [
            { "name": "not_blank", "args": [ 0, 1 ] }
          ]
        },
        "uploadvolumefactor": {
          "filters": [
            { "name": "constant", "args": "1" }
          ]
        }
      }
    },
    "user_basic_info": {
      "parser": "CssSelector",
      "method": "GET",
      "path": "/index.php",
      "fields": {
        "id": {
          "selector": "a.username[href*='user.php?id=']",
          "attribute": "href",
          "filters": [
            { "name": "re_search", "args": [ "id=(\\d+)", 1 ] }
          ]
        },
        "name": {
          "selector": "a.username[href*='user.php?id=']"
        },
        "uploaded": {
          "selector": "li#stats_seeding span.stat",
          "filters": [
            { "name": "byte_size" }
          ]
        },
        "downloaded": {
          "selector": "li#stats_leeching span.stat",
          "filters": [
            { "name": "byte_size" }
          ]
        },
        "ratio": {
          "selector": "li#stats_ratio span.stat > span",
          "filters": [
            { "name": "replace", "args": ["∞", "-1"] }
          ]
        },
        "bonus": {
          "selector": "li#nav_bonus a.tooltip",
          "filters": [
            { "name": "re_search", "args": ["([\\d,]+)", 1] },
            { "name": "replace", "args": [",", ""] }
          ]
        },
        "messages": {
          "selector": "li#nav_inbox a",
          "filters": [
            { "name": "re_search", "args": ["(\\d+)", 1] }
          ]
        }
      }
    },
    "user_details": {
      "parser": "JsonPath",
      "method": "GET",
      "path": "/ajax.php?action=user&id={userId}",
      "fields": {
        "level": {
          "selector": "response.personal.class"
        },
        "join_at": {
          "selector": "response.stats.joinedDate",
          "filters": [
            { "name": "timestamp" }
          ]
        },
        "last_accessed": {
          "selector": "response.stats.lastAccess",
          "filters": [
            { "name": "timestamp" }
          ]
        }
      }
    },
    "seeding_size": {
      "parser": "XPath",
      "method": "GET",
      "path": "/bonus.php?action=bprates",
      "disabled_extends": {
        "list": true
      },
      "fields": {
        "size": {
          "selector": "//table[@id='bprates_overview']/tbody/tr/td[2]",
          "filters": [
            {
              "name": "byte_size"
            }
          ]
        }
      }
    },
    "seeding_count": {
      "parser": "JsonPath",
      "method": "GET",
      "path": "/ajax.php?action=user&id={userId}",
      "disabled_extends": {
        "headers": true,
        "list": true
      },
      "fields": {
        "count": {
          "selector": "response.community.seeding"
        }
      }
    }
  }
}