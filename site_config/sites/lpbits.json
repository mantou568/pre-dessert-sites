{
  "id": "lpbits",
  "name": "LP-Bits",
  "domain": "https://lp-bits.com",
  "encoding": "UTF-8",
  "public": false,
  "schema": "NexusPHP",
  "required": { "cookie": true, "sign_in": false },
  "meta": { "has_free": true, "has_2x_free": true, "has_hr": true, "has_cover": true },
  "category": {
    "movie": [
      { "id": 401, "cat": "Movies", "desc": "MOVIES" },
      { "id": 403, "cat": "Movies", "desc": "MUSIC VIDEOS" }
    ],
    "tv": [
      { "id": 402, "cat": "TV/Documentary", "desc": "DOC." }
    ]
  },
  "requests": {
    "favicon": {
      "parser": "None",
      "method": "GET",
      "path": "/favicon.ico"
    },
    "user_basic_info": {
      "parser": "XPath",
      "method": "GET",
      "path": "",
      "fields": {
        "id": {
          "selector": "//table[@id='info_block']//a[contains(@href,'userdetails.php?id=') and contains(@class,'User_Name')]/@href",
          "filters": [ { "name": "re_search", "args": ["id=(\\d+)", 1] } ]
        },
        "name": {
          "selector": "//table[@id='info_block']//a[contains(@href,'userdetails') and contains(@class,'User_Name')]//b"
        },
        "uploaded": {
          "selector": "//table[@id='info_block']",
          "filters": [
            { "name": "re_search", "args": ["Uploaded:.*?([\\d.,]+\\s*[KMGTP]?i?B)", 1] },
            { "name": "byte_size" }
          ]
        },
        "downloaded": {
          "selector": "//table[@id='info_block']",
          "filters": [
            { "name": "re_search", "args": ["Downloaded:.*?([\\d.,]+\\s*[KMGTP]?i?B)", 1] },
            { "name": "byte_size" }
          ]
        },
        "ratio": {
          "selector": "//table[@id='info_block']",
          "filters": [
            { "name": "re_search", "args": ["Ratio:\\s*(Inf\\.?|[\\d.]+)", 1] },
            { "name": "strip" },
            { "name": "replace", "args": [",", ""] },
            { "name": "replace", "args": ["Inf.", "0"] },
            { "name": "replace", "args": ["Inf", "0"] }
          ]
        },
        "bonus": {
          "selector": "//table[@id='info_block']",
          "filters": [
            { "name": "re_search", "args": ["Bonus.*?]:\\s*([\\d.,]+)", 1] },
            { "name": "strip" },
            { "name": "replace", "args": [",", ""] }
          ]
        }
      }
    },
    "user_details": {
      "parser": "XPath",
      "method": "GET",
      "path": "/userdetails.php?id={userId}",
      "fields": {
        "level": {
          "selector": "//td[contains(@class,'rowhead') and contains(.,'Class')]/following-sibling::td[1]/img/@title",
          "filters": [ { "name": "strip" } ]
        },
        "level_icon": {
          "selector": "//td[contains(@class,'rowhead') and contains(.,'Class')]/following-sibling::td[1]/img/@src"
        },
        "join_at": {
          "selector": "//td[contains(@class,'rowhead') and contains(.,'Join') and contains(.,'date')]/following-sibling::td[1]//span/@title",
          "filters": [ { "name": "timestamp" }, { "name": "timezone", "args": ["+7"] } ]
        },
        "last_accessed": {
          "selector": "//td[contains(@class,'rowhead') and contains(.,'Last') and contains(.,'seen') and not(contains(.,'Location'))]/following-sibling::td[1]//span/@title",
          "filters": [ { "name": "timestamp" }, { "name": "timezone", "args": ["+7"] } ]
        }
      }
    },
    "search": {
      "fields": {
        "labels": { "selector": "td.embedded > span[title]", "array": true },
        "description": { "selector": "td.embedded", "remove": "span,a,img,font,b,br", "contents": -1 },
        "hr_days": { "filters": [{ "name": "constant", "args": ["1"] }] }
      }
    },
    "seeding_statistics": {
      "parser": "XPath",
      "method": "GET",
      "path": "/userdetails.php?id={userId}",
      "disabled_extends": { "list": true },
      "fields": {
        "count": {
          "selector": "//img[contains(@alt,'seeding') or contains(@title,'Seed')]/following-sibling::text()",
          "filters": [
            { "name": "strip" },
            { "name": "re_search", "args": ["(\\d+)", 1] }
          ]
        },
        "size": {
          "selector": "//td[contains(@class,'rowhead') and (contains(.,'Seeding') or contains(.,'seed'))]/following-sibling::td[1]",
          "filters": [ { "name": "strip" }, { "name": "byte_size" } ]
        }
      }
    },
    "my_hr": { "path": "/myhr.php?status=1" }
  }
}
