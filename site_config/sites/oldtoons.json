{
  "id": "oldtoons",
  "name": "老卡通",
  "domain": "https://oldtoons.world",
  "encoding": "UTF-8",
  "public": false,
  "schema": "NexusPHP",
  "required": {
    "cookie": true,
    "sign_in": false
  },
  "meta": {
    "has_free": true,
    "has_2x_free": true,
    "has_hr": false,
    "has_cover": true
  },
  "category": {
    "movie": [
      { "id": 6, "cat": "Movies", "desc": "Anime Movie" },
      { "id": 1, "cat": "Movies", "desc": "Movie" },
      { "id": 7, "cat": "TV", "desc": " Anime Live" },
      { "id": 5, "cat": "TV", "desc": "Action Live" }
    ],
    "tv": [
      { "id": 8, "cat": "TV", "desc": "Anime TV" },
      { "id": 2, "cat": "TV", "desc": "Television" },
      { "id": 3, "cat": "TV", "desc": "EPack" }
    ],
    "audio": [
      { "id": 7, "cat": "Audio", "desc": " Anime Live" },
      { "id": 11, "cat": "Audio", "desc": "Miscellaneous" }
    ],
    "music": [
      { "id": 9, "cat": "Audio", "desc": "Anime Music Video" },
      { "id": 4, "cat": "Audio", "desc": "Music" }
    ],
    "other": [
      { "id": 10, "cat": "Other", "desc": "Offline" }
    ]
  },
  "requests": {
    "user_basic_info": {
      "parser": "XPath",
      "method": "GET",
      "path": "/",
      "fields": {
        "is_login": {
          "selector": "//form[contains(@action, 'logout')]",
          "filters": [{ "name": "not_blank" }]
        },
        "id": {
          "selector": "//a[contains(@class, 'top-nav__username')]/@href",
          "filters": [{ "name": "re_search", "args": ["/users/([^/]+)", 1] }]
        },
        "name": {
          "selector": "//a[contains(@class, 'top-nav__username')]",
          "filters": [{ "name": "strip" }]
        },
        "uploaded": {
          "selector": "//li[contains(@class, 'ratio-bar__uploaded')]/a/text()",
          "filters": [
            { "name": "replace", "args": [",", ""] },
            { "name": "replace", "args": ["\u202f", ""] },
            { "name": "strip" },
            { "name": "byte_size" }
          ]
        },
        "downloaded": {
          "selector": "//li[contains(@class, 'ratio-bar__downloaded')]/a/text()",
          "filters": [
            { "name": "replace", "args": [",", ""] },
            { "name": "replace", "args": ["\u202f", ""] },
            { "name": "strip" },
            { "name": "byte_size" }
          ]
        },
        "ratio": {
          "selector": "//li[contains(@class, 'ratio-bar__ratio')]/a/text()",
          "filters": [
            { "name": "replace", "args": [",", ""] },
            { "name": "replace", "args": ["\u202f", ""] },
            { "name": "strip" }
          ]
        },
        "bonus": {
          "selector": "//li[contains(@class, 'ratio-bar__points')]/a/text()",
          "filters": [
            { "name": "replace", "args": [",", ""] },
            { "name": "replace", "args": ["\u202f", ""] },
            { "name": "strip" }
          ]
        }
      }
    },
    "user_details": {
      "parser": "XPath",
      "method": "GET",
      "path": "/users/{userId}",
      "fields": {
        "level": {
          "selector": "//a[contains(@class, 'user-tag__link')]/@title",
          "filters": [{ "name": "strip" }]
        },
        "join_at": {
          "selector": "//time[contains(@class, 'profile__registration')]/@datetime",
          "filters": [
            { "name": "timestamp" }
          ]
        },
        "last_accessed": {
          "selector": "//dt[contains(.,'上次登录')]/following-sibling::dd[1]//time/@datetime",
          "filters": [
            { "name": "timestamp" }
          ]
        }
      }
    },
    "messages": {
      "parser": "XPath",
      "method": "GET",
      "path": "/users/{userId}/conversations",
      "list": { "selector": "//table[contains(@class, 'data-table')]/tbody/tr" },
      "params": { "page": ["{page}"] },
      "fields": {
        "title": { 
          "selector": "./td[2]/a/text()", 
          "filters": [{ "name": "strip" }] 
        },
        "link": { "selector": "./td[2]/a/@href" },
        "id": { 
          "selector": "./td[2]/a/@href", 
          "filters": [{ "name": "re_search", "args": ["/conversations/(\\d+)", 1] }] 
        },
        "sender": { 
          "selector": "./td[1]//a/text()", 
          "filters": [{ "name": "strip" }] 
        },
        "date": { 
          "selector": "./td[3]//time/@datetime", 
          "filters": [{ "name": "strip" }] 
        },
        "unread": { 
          "selector": "./td[5]//*[contains(@title, '未读')]" 
        }
      }
    },
    "notice": {
      "parser": "XPath",
      "method": "GET",
      "path": "articles",
      "fields": {
        "content": {
          "selector": "//article[contains(@class, 'article-preview')]",
          "filters": []
        }
      }
    },
    "message_detail": {
      "parser": "XPath",
      "method": "GET",
      "path": "articles",
      "fields": {
        "title": { "selector": "//h2[contains(@class,'article-preview__title')]/a/text()" },
        "date": { "selector": "//time[contains(@class,'article-preview__published-date')]/@title" },
        "content": { "selector": "//p[contains(@class,'article-preview__content')]", "filters": [{ "name": "strip" }] }
      }
    },
    "rss": {
      "parser": "XML",
      "method": "GET",
      "path": "/rss/torrents/all",
      "fields": {
        "list": {
          "selector": "/rss/channel/item",
          "element": {
            "id": { "selector": "./guid", "filters": [{ "name": "re_search", "args": ["/torrents/(\\d+)", 1] }] },
            "title": { "selector": "./title" },
            "download": { "selector": "./link" },
            "pubDate": { "selector": "./pubDate", "filters": [{ "name": "timestamp" }] }
          }
        }
      }
    },
    "seeding_statistics": {
      "parser": "XPath",
      "method": "GET",
      "path": "/users/{userId}",
      "disabled_extends": { "list": true },
      "fields": {
        "size": {
          "selector": "//dt[contains(.,'做种体积')]/following-sibling::dd[1]/text()",
          "filters": [
             { "name": "replace", "args": [",", ""] },
             { "name": "replace", "args": ["\u202f", ""] },
             { "name": "byte_size" }
          ]
        },
        "count": {
          "selector": "//dt[contains(.,'总做种数量')]/following-sibling::dd[1]/text()",
          "filters": [
             { "name": "replace", "args": [",", ""] }, 
             { "name": "replace", "args": ["\u202f", ""] },
             { "name": "strip" }
          ]
        }
      }
    },
    "search": {
      "path": "torrents?perPage=100&view=list&categories[6]=6&categories[1]=7&categories[2]=5&categories[3]=1&categories[4]=8&categories[5]=2",
      "params": { "name": ["{keyword}"] },
      "list": { "selector": "table.data-table > tbody > tr" },
      "fields": {
        "id": { 
          "selector": "a[href*='/torrents/']", 
          "attribute": "href", 
          "filters": [{ "name": "re_search", "args": ["/torrents/(\\d+)", 1] }] 
        },
        "title": { 
          "selector": "a[href*='/torrents/']",
          "filters": [{ "name": "strip" }]
        },
        "details": { 
          "selector": "a[href*='/torrents/']", 
          "attribute": "href" 
        },
        "download": { 
          "selector": "a[href*='/download/']", 
          "attribute": "href" 
        },
        "date_added": { 
          "selector": "time", 
          "attribute": "datetime", 
          "filters": [{ "name": "timestamp" }] 
        },
        "size": { 
          "selector": ".torrent-search--list__size", 
          "filters": [{ "name": "byte_size" }] 
        },
        "seeders": { 
          "selector": ".torrent-search--list__seeders a",
          "filters": [{ "name": "strip" }]
        },
        "leechers": { 
          "selector": ".torrent-search--list__leechers a",
          "filters": [{ "name": "strip" }]
        },
        "grabs": { 
          "selector": ".torrent-search--list__completed a",
          "filters": [{ "name": "strip" }]
        },
        "downloadvolumefactor": { 
          "case": { 
            "i.fa-star": 0, 
            "i.fa-globe-americas": 0,
            "*": 1 
          } 
        },
        "uploadvolumefactor": { 
          "case": { 
            "i.fa-gem": 2, 
            "*": 1 
          } 
        }
      }
    }
  }
}