{
  "id": "monikadesign",
  "name": "莫妮卡",
  "domain": "https://monikadesign.uk",
  "encoding": "UTF-8",
  "public": false,
  "schema": "NexusPHP",
  "required": {
    "cookie": true,
    "sign_in": false
  },
  "meta": {
    "has_free": true,
    "has_2x_free": true,
    "has_hr": false,
    "has_cover": true
  },
  "category": {
    "movie": [
      { "id": 6, "cat": "Movies", "desc": "Anime Movie" },
      { "id": 1, "cat": "Movies", "desc": "Movie" },
      { "id": 7, "cat": "TV", "desc": " Anime Live" },
      { "id": 5, "cat": "TV", "desc": "Action Live" }
    ],
    "tv": [
      { "id": 8, "cat": "TV", "desc": "Anime TV" },
      { "id": 2, "cat": "TV", "desc": "Television" },
      { "id": 3, "cat": "TV", "desc": "EPack" }
    ],
    "audio": [
      { "id": 7, "cat": "Audio", "desc": " Anime Live" },
      { "id": 11, "cat": "Audio", "desc": "Miscellaneous" }
    ],
    "music": [
      { "id": 9, "cat": "Audio", "desc": "Anime Music Video" },
      { "id": 4, "cat": "Audio", "desc": "Music" }
    ],
    "other": [
      { "id": 10, "cat": "Other", "desc": "Offline" }
    ]
  },
  "requests": {
    "user_basic_info": {
      "parser": "XPath",
      "method": "GET",
      "path": "/",
      "fields": {
        "is_login": {
          "selector": "//button[@class='top-nav--right__link']/text()",
          "filters": [
            { "name": "re_search", "args": ["退出登录", 0] }
          ]
        },
        "id": {
          "selector": "//a[contains(@class, 'top-nav__username--highresolution')]/@href",
          "filters": [
            { "name": "re_search", "args": ["/users/([^/]+)", 1] }
          ]
        },
        "name": {
          "selector": "//a[contains(@class, 'top-nav__username--highresolution')]/@href",
          "filters": [
            { "name": "re_search", "args": ["/users/([^/]+)", 1] }
          ]
        },
        "uploaded": {
          "selector": "//li[contains(@title, '上传量')]/a/text()",
          "filters": [
            { "name": "replace", "args": [",", ""] },
            { "name": "byte_size" }
          ]
        },
        "downloaded": {
          "selector": "//li[contains(@title, '下载量')]/a/text()",
          "filters": [
            { "name": "replace", "args": [",", ""] },
            { "name": "byte_size" }
          ]
        },
        "ratio": {
          "selector": "//li[contains(@title, '分享率')]/a/text()",
          "filters": [
            { "name": "replace", "args": [",", ""] }
          ]
        },
        "bonus": {
          "selector": "//li[contains(@title, '魔力')]/a/text()",
          "filters": [
            { "name": "replace", "args": [",", ""] }
          ]
        }
      }
    },
    "user_details": {
      "parser": "XPath",
      "method": "GET",
      "path": "/users/{userId}",
      "fields": {
        "level": {
          "selector": "//div[@class='header gradient blue']//h4[1]/span/text()"
        },
        "join_at": {
          "selector": "//h4[contains(text(),'注册日期')]/text()",
          "filters": [
            { "name": "re_search", "args": ["([A-Za-z]{3}\\s+\\d{2}\\s+\\d{4})", 1] },
            { "name": "timestamp", "args": ["Jan 02 2006"] }
          ]
        },
        "last_accessed": {
          "selector": "//td[contains(normalize-space(),'上次登录时间')]/following-sibling::td[1]",
          "filters": [
            { "name": "re_search", "args": ["([A-Za-z]{3},\\s+[A-Za-z]{3}\\s+\\d{1,2},\\s+\\d{4}\\s+\\d{1,2}:\\d{2}\\s+[AP]M)", 1] },
            { "name": "timestamp", "args": ["Mon, Jan 2, 2006 3:04 PM"] }
          ]
        }
      }
    },
    "rss": {
      "parser": "XML",
      "method": "GET",
      "path": "/rss/torrents/all",
      "fields": {
        "list": {
          "selector": "/rss/channel/item",
          "element": {
            "id": {
              "selector": "./guid",
              "filters": [
                { "name": "re_search", "args": ["/torrents/(\\d+)", 1] }
              ]
            },
            "title": { "selector": "./title" },
            "download": { "selector": "./link" },
            "pubDate": { "selector": "./pubDate", "filters": [{ "name": "timestamp" }] }
          }
        }
      }
    },
    "seeding_statistics": {
      "parser": "XPath",
      "method": "GET",
      "path": "/users/{userId}",
      "disabled_extends": {
        "list": true
      },
      "fields": {
        "size": {
          "selector": "//td[contains(text(),'做种体积')]/following-sibling::td[1]/span/text()",
          "filters": [
            { "name": "byte_size" }
          ]
        },
        "count": {
          "selector": "//div[contains(@class,'button-holder')]//span[contains(text(),'做种数量')]/a/text()",
          "filters": [
            { "name": "replace", "args": [",", ""] },
            { "name": "strip" }
          ]
        }
      }
    },
    "search": {
      "path": "torrents?perPage=100&categories[0]=6&categories[1]=7&categories[2]=5&categories[3]=1&categories[4]=8&categories[5]=2",
      "params": {
        "name": ["{keyword}"]
      },
      "list": {
        "selector": "table#torrent-list-table > tbody > tr"
      },
      "fields": {
        "id": {
          "selector": "a.view-torrent.torrent-listings-name",
          "attribute": "href",
          "filters": [{ "name": "re_search", "args": ["\\d+", 0] }]
        },
        "title": { "selector": "a.view-torrent.torrent-listings-name" },
        "description": { "selector": "span.view-torrent.torrent-listings-subhead > b" },
        "details": { "selector": "a.view-torrent.torrent-listings-name", "attribute": "href" },
        "download": { "selector": "a[href*=\"/torrents/download/\"]", "attribute": "href" },
        "date_added": {
          "selector": "td.torrent-listings-age > span.badge-extra",
          "attribute": "data-original-title",
          "filters": [{ "name": "timestamp" }]
        },
        "size": {
          "selector": "td.torrent-listings-size > span",
          "filters": [{ "name": "byte_size" }]
        },
        "seeders": { "selector": "td.torrent-listings-seeders > a > span" },
        "leechers": { "selector": "td.torrent-listings-leechers > a > span" },
        "grabs": { "selector": "td.torrent-listings-completed > a > span" },
        "cover": { "selector": "td.torrent-listings-poster > div > a > img", "attribute": "src" },
        "downloadvolumefactor": {
          "case": { "span.torrent-listings-freeleech": 0, "*": 1 }
        },
        "uploadvolumefactor": { "case": { "*": 1 } }
      }
    }
  }
}