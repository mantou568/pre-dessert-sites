
{
  "id": "RED",
  "name": "RED",
  "domain": "https://redacted.sh",
  "public": false,
  "reuse_schema": "NexusPHP",
  "required": {
    "cookie": true,
    "sign_in": true
  },
  "requests": {
    "search": {
      "parser": "JsonPath",
      "method": "GET",
      "path": "/ajax.php",
      "params": {
        "action": [
          "browse"
        ],
        "searchstr": [
          "{keyword}"
        ]
      },
      "disabled_extends": {
        "fields": true,
        "field": true
      },
      "list": {
        "selector": "response.results"
      },
      "flat_map_fields": {
        "selector": "torrents",
        "fields": {
          "id": {
            "selector": "torrentId"
          },
          "date_added": {
            "selector": "time",
            "filters": [
              { "name": "timestamp" }
            ]
          },
          "encoding": {
            "selector": "encoding"
          },
          "hasLog": {
            "selector": "hasLog"
          },
          "logScore": {
            "selector": "logScore"
          },
          "hasCue": {
            "selector": "hasCue"
          },
          "format_encoding": {
            "selector": "format",
            "filters": [
              {
                "name": "append_right",
                "args": "_"
              },
              {
                "name": "append_field_right",
                "args": "encoding"
              }
            ]
          },
          "format_log": {
            "selector": "format_encoding",
            "filters": [
              {
                "name": "append_right",
                "args": "_"
              },
              {
                "name": "append_field_right",
                "args": "hasLog"
              }
            ]
          },
          "log_full": {
            "selector": "format_log",
            "filters": [
              {
                "name": "case",
                "args": {
                  "FLAC_Lossless_true": " / Log (",
                  "*": ""
                }
              },
              {
                "name": "append_field_right",
                "args": "logScore"
              },
              {
                "name": "append_right",
                "args": "%)"
              },
              {
                "name": "replace",
                "args": ["^(?! / Log \\(\\d+%\\)$).*", ""]
              },
              {
                "name": "replace",
                "args": ["^[0-9]+%\\)$", ""]
              },
              {
                "name": "replace",
                "args": ["^[^/].*", ""]
              }
            ]
          },
          "format_cue": {
            "selector": "format_encoding",
            "filters": [
              {
                "name": "append_right",
                "args": "_"
              },
              {
                "name": "append_field_right",
                "args": "hasCue"
              }
            ]
          },
          "cue_part": {
            "selector": "format_cue",
            "filters": [
              {
                "name": "case",
                "args": {
                  "FLAC_Lossless_true": " / Cue",
                  "*": ""
                }
              }
            ]
          },
          "encoding_part": {
            "selector": "encoding",
            "filters": [
              {
                "name": "append_left",
                "args": " / "
              }
            ]
          },
          "description": {
            "selector": "format",
            "filters": [
              {
                "name": "append_right",
                "args": " / "
              },
              {
                "name": "append_field_right",
                "args": "encoding"
              },
              {
                "name": "append_field_right",
                "args": "log_full"
              },
              {
                "name": "append_field_right",
                "args": "cue_part"
              },
              {
                "name": "replace",
                "args": ["0%\\)", ""]
              },
              {
                "name": "replace",
                "args": ["false%\\)", ""]
              },
              {
                "name": "replace",
                "args": ["true%\\)", ""]
              },
              {
                "name": "replace",
                "args": ["%\\)", ""]
              }
            ]
          },
          "download": {
            "selector": "torrentId",
            "filters": [
              {
                "name": "append_left",
                "args": "/torrents.php?action=download&id="
              }
            ]
          },
          "details": {
            "selector": "torrentId",
            "filters": [
              {
                "name": "append_left",
                "args": "/torrents.php?id="
              },
              {
                "name": "append_field_right",
                "args": "group_id"
              },
              {
                "name": "append_right",
                "args": "&torrentid="
              },
              {
                "name": "append_field_right",
                "args": "torrentId"
              },
              {
                "name": "append_right",
                "args": "#torrent"
              },
              {
                "name": "append_field_right",
                "args": "torrentId"
              }
            ]
          }
        }
      },
      "fields": {
        "group_id": {
          "selector": "groupId"
        },
        "group_name": {
          "selector": "groupName"
        },
        "title": {
          "selector": "artist",
          "filters": [
            {
              "name": "append_right",
              "args": " - "
            },
            {
              "name": "append_field_right",
              "args": "group_name"
            }
          ]
        },
        "cover": {
          "selector": "cover"
        },
        "labels": {
          "selector": "tags",
          "array": true
        },
        "size": {
          "selector": "maxSize"
        },
        "seeders": {
          "selector": "totalSeeders"
        },
        "leechers": {
          "selector": "totalLeechers"
        },
        "grabs": {
          "selector": "totalSnatched"
        },
        "uploadvolumefactor": {
          "filters": [
            { "name": "constant", "args": "1" }
          ]
        },
        "downloadvolumefactor": {
          "filters": [
            { "name": "constant", "args": "1" }
          ]
        },
        "category": {
          "selector": "releaseType"
        }
      }
    },
    "user_basic_info": {
      "parser": "JsonPath",
      "method": "GET",
      "path": "http://192.168.2.5:3000/ajax.php?action=index",
      "fields": {
        "is_login": {
          "selector": "response.username",
          "filters": [
            { "name": "not_blank" }
          ]
        },
        "id": {
          "selector": "response.id"
        },
        "name": {
          "selector": "response.username"
        },
        "bonus": {
          "selector": "response.giftTokens"
        },
        "uploaded": {
          "selector": "response.userstats.uploaded",
          "filters": [
            { "name": "byte_size" }
          ]
        },
        "downloaded": {
          "selector": "response.userstats.downloaded",
          "filters": [
            { "name": "byte_size" }
          ]
        },
        "ratio": {
          "selector": "response.userstats.ratio",
          "filters": [
            { "name": "replace", "args": ["âˆž", "0"] }
          ]
        }
      }
    },
    "user_details": {
      "parser": "JsonPath",
      "method": "GET",
      "path": "http://192.168.2.5:3000/ajax.php?action=user&id={userId}",
      "fields": {
        "level": {
          "selector": "response.personal.class"
        },
        "join_at": {
          "selector": "response.stats.joinedDate",
          "filters": [
            { "name": "timestamp" }
          ]
        },
        "last_accessed": {
          "selector": "response.stats.lastAccess",
          "filters": [
            { "name": "timestamp" }
          ]
        }
      }
    },
    "seeding_statistics": {
      "parser": "JsonPath",
      "method": "GET",
      "path": "http://192.168.2.5:3000/ajax.php?action=user&id={userId}",
      "disabled_extends": {
        "list": true
      },
      "fields": {
        "count": {
          "selector": "response.community.seeding"
        }
      }
    }
  }
}
