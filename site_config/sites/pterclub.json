{
  "id": "pterclub",
  "name": "猫站",
  "domain": "https://pterclub.net",
  "additional_domain": ["https://pterclub.com"],
  "public": false,
  "schema": "NexusPHP",
  "required": {
    "cookie": true,
    "sign_in": true
  },
  "meta": {
    "has_free": true,
    "has_2x_free": true,
    "has_cover": true
  },
  "category": {
    "movie": [
      {
        "id": 401,
        "cat": "Movies",
        "desc": "电影 (Movie)"
      }
    ],
    "tv": [
      {
        "id": 404,
        "cat": "TV",
        "desc": "电视剧 (TV Play)"
      },
      {
        "id": 403,
        "cat": "TV/Anime",
        "desc": "动漫 (Anime)"
      },
      {
        "id": 405,
        "cat": "TV",
        "desc": "综艺 (TV Show)"
      },
      {
        "id": 402,
        "cat": "TV/Documentary",
        "desc": "纪录片 (Documentary)"
      }
    ]
  },
  "requests": {
    "user_basic_info": {
      "parser": "XPath",
      "fields": {
        "bonus": {
          "any": [
            {
              "selector": "//span[@id='attendance-wrap']/preceding-sibling::text()[1]",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "([\\d,]+\\.?\\d*)",
                    1
                  ]
                }
              ]
            },
            {
              "selector": "//a[contains(@href,'sitefreepool.php')]/following-sibling::text()[1]",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "[:：]\\s*([\\d,]+\\.?\\d*)",
                    1
                  ]
                }
              ]
            },
            {
              "selector": "//span[@class='color_bonus'][contains(text(),'猫粮')]/ancestor::a/following-sibling::text()[contains(.,':')]",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "[:：]\\s*([\\d,]+\\.?\\d*)",
                    1
                  ]
                }
              ]
            },
            {
              "selector": "//*[@id='info_block']/tbody/tr/td/table/tbody/tr/td[1]/span/text()[9]",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "\\s*([\\d,]+\\.\\d+)",
                    1
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    "user_details": {
      "fields": {
        "level": {
          "selector": "//img[contains(@src, 'pic/user_class')]/@alt"
        },
        "level_icon": {
          "selector": "//img[contains(@src, 'pic/user_class')]/@src"
        }
      }
    },
    "search": {
      "parser": "CssSelector",
      "method": "GET",
      "path": "/torrents.php",
      "params": {
        "search": [
          "{keyword}"
        ]
      },
      "disabled_extends": {
        "fields": true,
        "field": true
      },
      "fields": {
        "labels": {
          "selector": "td.embedded > span[title]",
          "array": true
        },
        "description": {
          "any": [
            {
              "selector": "td:nth-child(2) > div > div:nth-child(2) > span"
            },
            {
              "selector": "td.embedded",
              "remove": "span,a,img,font,b,br",
              "contents": -1
            }
          ]
        },
        "id": {
          "selector": "a[href*='details.php?id=']",
          "attribute": "href",
          "filters": [
            {
              "name": "re_search",
              "args": [
                "id=(\\d+)",
                1
              ]
            }
          ]
        },
        "cover": {
          "any": [
            {
              "selector": "td:nth-child(1) > img",
              "attribute": "data-orig"
            },
            {
              "selector": "td:nth-child(1) > img",
              "attribute": "data-src"
            },
            {
              "selector": "td:nth-child(1) > img",
              "attribute": "src"
            }
          ]
        },
        "size": {
          "any": [
            {
              "selector": "td.rowfollow:nth-last-child(5)"
            },
            {
              "selector": "td:nth-child(5):not(.embedded)"
            },
            {
              "selector": "td.rowfollow"
            }
          ],
          "filters": [
            {
              "name": "re_search",
              "args": [
                "([\\d.,]+\\s*[KMGTPEZY]?i?B)",
                1
              ]
            },
            {
              "name": "byte_size"
            }
          ]
        },
        "seeders": {
          "any": [
            {
              "selector": "a[href*='dllist=1#seeders']"
            },
            {
              "selector": "td.rowfollow:nth-last-child(4) b"
            },
            {
              "selector": "td:nth-child(6):not(.embedded) b"
            }
          ],
          "filters": [
            {
              "name": "re_search",
              "args": [
                "(\\d+)",
                1
              ]
            }
          ]
        },
        "leechers": {
          "any": [
            {
              "selector": "a[href*='dllist=1#leechers']"
            },
            {
              "selector": "td.rowfollow:nth-last-child(3) b"
            },
            {
              "selector": "td:nth-child(7):not(.embedded) b"
            }
          ],
          "filters": [
            {
              "name": "re_search",
              "args": [
                "(\\d+)",
                1
              ]
            }
          ]
        },
        "grabs": {
          "any": [
            {
              "selector": "a[href*='viewsnatches.php?id='] b",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "(\\d+)",
                    1
                  ]
                }
              ]
            },
            {
              "selector": "td.rowfollow:nth-last-child(2) a b",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "(\\d+)",
                    1
                  ]
                }
              ]
            },
            {
              "selector": "td:nth-child(8):not(.embedded)",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "(\\d+)",
                    1
                  ]
                }
              ]
            }
          ]
        },
        "date_added": {
          "any": [
            {
              "selector": "td.rowfollow.nowrap > span",
              "attribute": "title",
              "filters": [
                {
                  "name": "timestamp"
                }
              ]
            },
            {
              "selector": "td:nth-child(4):not(.embedded) > span",
              "attribute": "title",
              "filters": [
                {
                  "name": "timestamp"
                }
              ]
            }
          ]
        },
        "downloadvolumefactor": {},
        "uploadvolumefactor": {},
        "title": {
          "any": [
            {
              "selector": "a[title][href*='details.php?id=']",
              "attribute": "title"
            },
            {
              "selector": "table.torrentname a[href*='details.php?id='] b"
            },
            {
              "selector": "table.torrentname td.embedded a[href*='details.php?id='] b"
            },
            {
              "selector": "a[href*='details.php?id='] b"
            },
            {
              "selector": "td:nth-child(2) > div > div:nth-child(1) > a > b"
            },
            {
              "selector": "a[href*='details.php?id=']"
            }
          ]
        },
        "details": {
          "selector": "a[href*='details.php?id=']",
          "attribute": "href"
        },
        "download": {
          "selector": "a[href*='download.php?id=']",
          "attribute": "href"
        },
        "category": {},
        "imdb_id": {
          "any": [
            {
              "selector": "a[href*='imdb.com/title/tt']",
              "attribute": "href",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "(tt\\d+)",
                    1
                  ]
                }
              ]
            },
            {
              "selector": "span[data-imdbid]",
              "attribute": "data-imdbid",
              "filters": [
                {
                  "name": "pad_zero",
                  "args": 7
                },
                {
                  "name": "append_left",
                  "args": "tt"
                }
              ]
            },
            {
              "selector": "label[data-imdbid]",
              "attribute": "data-imdbid",
              "filters": [
                {
                  "name": "pad_zero",
                  "args": 7
                },
                {
                  "name": "append_left",
                  "args": "tt"
                }
              ]
            },
            {
              "selector": "a[href*='search_area=4']",
              "attribute": "href",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "search=(\\d+)",
                    1
                  ]
                },
                {
                  "name": "pad_zero",
                  "args": 7
                },
                {
                  "name": "append_left",
                  "args": "tt"
                }
              ]
            }
          ]
        },
        "douban_id": {
          "any": [
            {
              "selector": "a[href*='movie.douban.com/subject/']",
              "attribute": "href",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "(\\d+)",
                    0
                  ]
                }
              ]
            },
            {
              "selector": "span[data-doubanid]",
              "attribute": "data-doubanid"
            },
            {
              "selector": "label[data-doubanid]",
              "attribute": "data-doubanid"
            },
            {
              "selector": "a[href*='search_area=5']",
              "attribute": "href",
              "filters": [
                {
                  "name": "re_search",
                  "args": [
                    "search=(\\d+)",
                    1
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    "details": {
      "fields": {
        "peer_count": {
          "selector": "(//td[@align='left' and @class='rowfollow' and @valign='top']/b[1])[3]",
          "filters": [
            {
              "name": "re_search",
              "args": [
                "\\d+",
                0
              ]
            }
          ]
        }
      }
    },
    "seeding_statistics": {
      "parser": "CssSelector",
      "path": "/userdetails.php?id={userId}",
      "headers": {
        "Referer": "{domain}/userdetails.php?id={userId}"
      },
      "disabled_extends": {
        "headers": true,
        "list": true
      },
      "fields": {
        "count": {
          "selector": "#info_block a[href*='getusertorrentlist.php'][href*='type=seeding']"
        },
        "size": {
          "selector": "td.rowhead:contains('做种大小') + td, td.rowhead:contains('Seeding Size') + td, td.rowhead:contains('做種大小') + td",
          "filters": [
            {
              "name": "byte_size"
            }
          ]
        }
      }
    },
    "sign_in": {
      "parser": "JsonPath",
      "method": "GET",
      "path": "/attendance-ajax.php",
      "fields": {
        "signed_in": {
          "selector": "status",
          "filters": [
            {
              "name": "eq",
              "args": "0"
            }
          ]
        }
      }
    }
  }
}
